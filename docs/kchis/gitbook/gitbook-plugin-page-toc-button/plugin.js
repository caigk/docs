var gitbook=window.gitbook,options={};gitbook.events.bind("start",function(i,e){options=e["page-toc-button"]||{}}),gitbook.events.on("page.change",function(){var e=2,n=2;options&&(e=options.maxTocDepth||e,n=options.minTocSize||n);var l=$(".book .body-inner .markdown-section :header"),t=[],r=0;for(i=0;i<l.length;i++){var h=l[i],a=$(h),o=a.attr("id");if(void 0!==o&&!1!==o)switch(h.tagName){case"H1":t.push({name:a.text(),url:o,children:[]}),r++;break;case"H2":0<t.length&&1<=e&&(t[t.length-1].children.push({name:a.text(),url:o,children:[]}),r++);break;case"H3":0<t.length&&2<=e&&0<t[t.length-1].children.length&&(t[t.length-1].children[t[t.length-1].children.length-1].children.push({name:a.text(),url:o,children:[]}),r++)}}if(!(0==r||r<n)){var c="<div class='page-toc-button'><i class='fa fa-bars' aria-hidden='true'></i><div class='page-toc-menu'><ul>";for(i=0;i<t.length;i++)if(c+="<li><a href='#"+t[i].url+"'>"+t[i].name+"</a></li>",0<t[i].children.length){for(c+="<ul>",j=0;j<t[i].children.length;j++)if(c+="<li><a href='#"+t[i].children[j].url+"'>"+t[i].children[j].name+"</a></li>",0<t[i].children[j].children.length){for(c+="<ul>",k=0;k<t[i].children[j].children.length;k++)c+="<li><a href='#"+t[i].children[j].children[k].url+"'>"+t[i].children[j].children[k].name+"</a></li>";c+="</ul>"}c+="</ul>"}c+="</ul></div></div>",$(".book").append(c)}});